<mat-card style="height: 96%;">
  <mat-card-title class="title">Heart rate graph</mat-card-title>
  <mat-divider></mat-divider>
  <mat-card-content class="mx-3 mt-4 mb-6">
    <div class="refresh-container" *ngIf="smartBandId && !isLoading">
      <button (click)="refreshData()" class="refresh-button"><mat-icon>refresh</mat-icon></button>
    </div>
    <div *ngIf="isLoading" class="loading-container">
      <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
    </div>
    <div id="chart" *ngIf="showChart && !isLoading">
      <apx-chart
        [series]="chartOptions.series!"
        [chart]="chartOptions.chart!"
        [dataLabels]="chartOptions.dataLabels!"
        [markers]="chartOptions.markers!"
        [title]="chartOptions.title!"
        [fill]="chartOptions.fill!"
        [yaxis]="chartOptions.yaxis!"
        [xaxis]="chartOptions.xaxis!"
        [tooltip]="chartOptions.tooltip!"
        [autoUpdateSeries]="true"
      ></apx-chart>
    </div>
    <div *ngIf="!smartBandId && !isLoading" class="no-smartband-message">
      <svg xmlns="http://www.w3.org/2000/svg" width="86" height="68" viewBox="0 0 86 68" fill="none">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M81.4737 44.1313C81.4737 44.4314 81.3545 44.7192 81.1423 44.9314C80.93 45.1437 80.6422 45.2629 80.3421 45.2629H70.1579V49.7892H78.0789C78.3791 49.7892 78.6669 49.9084 78.8791 50.1206C79.0913 50.3328 79.2105 50.6207 79.2105 50.9208V53.1839C79.2105 53.484 79.0913 53.7719 78.8791 53.9841C78.6669 54.1963 78.3791 54.3155 78.0789 54.3155H58.9621V58.8418H70.8368C64.3868 63.9837 54.4901 64.554 47.1325 60.5007L33.9066 53.2133L31.7204 57.1784L44.9486 64.4658C53.8813 69.3859 65.9416 68.7386 73.9306 62.1596C75.1755 61.1333 76.3504 60.0249 77.4475 58.8418H78.0767C79.5773 58.8418 81.0164 58.2457 82.0774 57.1847C83.1385 56.1236 83.7346 54.6845 83.7346 53.1839V50.9208C83.7353 50.2342 83.6111 49.5532 83.3679 48.9111C84.1741 48.4009 84.8381 47.6951 85.2983 46.8595C85.7584 46.0238 85.9998 45.0853 86 44.1313V41.8681C86 39.8562 84.9499 38.0909 83.3702 37.0883C83.6133 36.4462 83.7376 35.7653 83.7368 35.0787V32.8155C83.7371 31.5112 83.2867 30.2468 82.4619 29.2364C81.6371 28.226 80.4885 27.5316 79.2105 27.2708V25.4376C79.2111 23.7278 78.5666 22.0807 77.4057 20.8254C76.2448 19.5701 74.653 18.799 72.9484 18.6662L65.7198 18.105H64.242C52.9398 18.105 41.8051 20.8208 31.7725 26.0283L33.8591 30.0454C43.2458 25.1737 53.6664 22.6308 64.242 22.6313H65.5433L72.5976 23.179C73.1655 23.2234 73.6958 23.4804 74.0826 23.8987C74.4694 24.3169 74.6842 24.8657 74.6842 25.4353V27.1576H70.1579V31.6839H78.0789C78.3791 31.6839 78.6669 31.8031 78.8791 32.0154C79.0913 32.2276 79.2105 32.5154 79.2105 32.8155V35.0787C79.2105 35.3788 79.0913 35.6666 78.8791 35.8788C78.6669 36.091 78.3791 36.2102 78.0789 36.2102H70.1579V40.7366H80.3421C80.6422 40.7366 80.93 40.8558 81.1423 41.068C81.3545 41.2802 81.4737 41.568 81.4737 41.8681V44.1313ZM0 29.4208H20.3684V33.9471H0V29.4208ZM0 52.0523H20.3684V56.5787H0V52.0523Z" fill="#699BF7"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M18.1055 6.78947C18.1055 4.98879 18.8208 3.26186 20.0941 1.98859C21.3673 0.715318 23.0943 0 24.8949 0C26.6956 0 28.4226 0.715318 29.6958 1.98859C30.9691 3.26186 31.6844 4.98879 31.6844 6.78947V24.8947C31.6844 26.6954 30.9691 28.4223 29.6958 29.6956C28.4226 30.9689 26.6956 31.6842 24.8949 31.6842C23.0943 31.6842 21.3673 30.9689 20.0941 29.6956C18.8208 28.4223 18.1055 26.6954 18.1055 24.8947V6.78947ZM27.1581 8.04553C27.1581 8.64575 26.9197 9.2214 26.4952 9.64582C26.0708 10.0702 25.4952 10.3087 24.8949 10.3087C24.2947 10.3087 23.7191 10.0702 23.2946 9.64582C22.8702 9.2214 22.6318 8.64575 22.6318 8.04553C22.6318 7.4453 22.8702 6.86966 23.2946 6.44523C23.7191 6.02081 24.2947 5.78237 24.8949 5.78237C25.4952 5.78237 26.0708 6.02081 26.4952 6.44523C26.9197 6.86966 27.1581 7.4453 27.1581 8.04553ZM24.8949 18.1053C25.4952 18.1053 26.0708 17.8668 26.4952 17.4424C26.9197 17.018 27.1581 16.4423 27.1581 15.8421C27.1581 15.2419 26.9197 14.6662 26.4952 14.2418C26.0708 13.8174 25.4952 13.5789 24.8949 13.5789C24.2947 13.5789 23.7191 13.8174 23.2946 14.2418C22.8702 14.6662 22.6318 15.2419 22.6318 15.8421C22.6318 16.4423 22.8702 17.018 23.2946 17.4424C23.7191 17.8668 24.2947 18.1053 24.8949 18.1053Z" fill="#699BF7"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M18.1055 6.78947C18.1055 4.98879 18.8208 3.26186 20.0941 1.98859C21.3673 0.715318 23.0943 0 24.8949 0C26.6956 0 28.4226 0.715318 29.6958 1.98859C30.9691 3.26186 31.6844 4.98879 31.6844 6.78947V24.8947C31.6844 26.6954 30.9691 28.4223 29.6958 29.6956C28.4226 30.9689 26.6956 31.6842 24.8949 31.6842C23.0943 31.6842 21.3673 30.9689 20.0941 29.6956C18.8208 28.4223 18.1055 26.6954 18.1055 24.8947V6.78947ZM27.1581 22.2468V24.8947C27.1581 25.495 26.9197 26.0706 26.4952 26.495C26.0708 26.9195 25.4952 27.1579 24.8949 27.1579C24.2947 27.1579 23.7191 26.9195 23.2946 26.495C22.8702 26.0706 22.6318 25.495 22.6318 24.8947V22.2468C24.0961 22.7646 25.6937 22.7646 27.1581 22.2468ZM26.7688 14.5747C27.105 15.072 27.2298 15.6825 27.1158 16.2718C27.0019 16.8611 26.6585 17.381 26.1612 17.7171C25.6639 18.0533 25.0534 18.1781 24.4641 18.0641C23.8748 17.9502 23.3549 17.6068 23.0188 17.1095C22.6827 16.6122 22.5578 16.0017 22.6718 15.4124C22.7858 14.8231 23.1292 14.3032 23.6264 13.9671C24.1237 13.631 24.7342 13.5061 25.3235 13.6201C25.9128 13.7341 26.4327 14.0774 26.7688 14.5747ZM26.7688 9.31516C27.105 8.81787 27.2298 8.20743 27.1158 7.61811C27.0019 7.0288 26.6585 6.50889 26.1612 6.17276C25.6639 5.83664 25.0534 5.71182 24.4641 5.82578C23.8748 5.93974 23.3549 6.28313 23.0188 6.78042C22.8524 7.02665 22.736 7.30326 22.6765 7.59444C22.617 7.88562 22.6154 8.18567 22.6718 8.47747C22.7282 8.76927 22.8416 9.04709 23.0054 9.29509C23.1692 9.54308 23.3802 9.75638 23.6264 9.92282C24.1237 10.2589 24.7342 10.3838 25.3235 10.2698C25.6153 10.2134 25.8931 10.1 26.1411 9.93623C26.3891 9.77243 26.6024 9.56139 26.7688 9.31516Z" fill="#699BF7"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M13.5801 29.4213C13.5801 28.2209 14.057 27.0696 14.9058 26.2207C15.7547 25.3719 16.9059 24.895 18.1064 24.895H31.6853C32.8858 24.895 34.0371 25.3719 34.8859 26.2207C35.7348 27.0696 36.2117 28.2209 36.2117 29.4213V56.5792C36.2116 57.3918 35.9929 58.1893 35.5783 58.8882C35.1638 59.5871 34.5688 60.1615 33.8557 60.5511C32.7581 61.1531 31.6853 62.1194 31.6853 63.3687C31.6853 63.9689 31.4469 64.5446 31.0225 64.969C30.5981 65.3934 30.0224 65.6319 29.4222 65.6319H20.3696C19.7693 65.6319 19.1937 65.3934 18.7693 64.969C18.3448 64.5446 18.1064 63.9689 18.1064 63.3687C18.1064 62.1194 17.0314 61.1508 15.936 60.5511C15.223 60.1615 14.628 59.5871 14.2134 58.8882C13.7989 58.1893 13.5801 57.3918 13.5801 56.5792V29.4213ZM21.5011 31.6845C21.201 31.6845 20.9132 31.8037 20.701 32.0159C20.4888 32.2281 20.3696 32.516 20.3696 32.8161V53.1845C20.3696 53.4846 20.4888 53.7724 20.701 53.9846C20.9132 54.1969 21.201 54.3161 21.5011 54.3161H28.2906C28.5907 54.3161 28.8785 54.1969 29.0908 53.9846C29.303 53.7724 29.4222 53.4846 29.4222 53.1845V32.8161C29.4222 32.516 29.303 32.2281 29.0908 32.0159C28.8785 31.8037 28.5907 31.6845 28.2906 31.6845H21.5011Z" fill="#699BF7"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M20.9037 58.8107C21.4822 59.4898 21.9345 60.267 22.2389 61.1055H27.5506C27.8557 60.2668 28.3087 59.4896 28.8881 58.8107M18.1064 24.895C16.9059 24.895 15.7547 25.3719 14.9058 26.2207C14.057 27.0696 13.5801 28.2209 13.5801 29.4213V56.5792C13.5801 57.3918 13.7989 58.1893 14.2134 58.8882C14.628 59.5871 15.223 60.1615 15.936 60.5511C17.0314 61.1531 18.1064 62.1194 18.1064 63.3687C18.1064 63.9689 18.3448 64.5446 18.7693 64.969C19.1937 65.3934 19.7693 65.6319 20.3696 65.6319H29.4222C30.0224 65.6319 30.5981 65.3934 31.0225 64.969C31.4469 64.5446 31.6853 63.9689 31.6853 63.3687C31.6853 62.1194 32.7581 61.1508 33.8557 60.5511C34.5688 60.1615 35.1638 59.5871 35.5783 58.8882C35.9929 58.1893 36.2116 57.3918 36.2117 56.5792V29.4213C36.2117 28.2209 35.7348 27.0696 34.8859 26.2207C34.0371 25.3719 32.8858 24.895 31.6853 24.895H18.1064ZM20.3696 32.8161C20.3696 32.516 20.4888 32.2281 20.701 32.0159C20.9132 31.8037 21.201 31.6845 21.5011 31.6845H28.2906C28.5907 31.6845 28.8785 31.8037 29.0908 32.0159C29.303 32.2281 29.4222 32.516 29.4222 32.8161V53.1845C29.4222 53.4846 29.303 53.7724 29.0908 53.9846C28.8785 54.1969 28.5907 54.3161 28.2906 54.3161H21.5011C21.201 54.3161 20.9132 54.1969 20.701 53.9846C20.4888 53.7724 20.3696 53.4846 20.3696 53.1845V32.8161Z" fill="#699BF7"/>
      </svg>
      <p class="message">This Driver does not yet have a smart band assigned :(  ...</p>
    </div>
  </mat-card-content>
</mat-card>
